@model IEnumerable<Project4thYear.Models.League>


@{
    ViewBag.Title = "League";
}

<h2>League</h2>

@using(Html.BeginForm())
{
    <p>
        <div class="form-group">
            Enter Year: <div id="year">@Html.TextBox("searchString")
            <input type="submit" value=" Search" class="btn btn-primary btn-sm"/> Format: e.g. 2013/2014  
           </div> 
        </div>
    </p>
}

<p>OR</p>


<div>
    <select id="yearList" onchange="changeYear(yearList.value.toString())">
        <option selected="">Select a year</option>
        <option value="2013/2014">2013/2014</option>
        <option value="2012/2013">2012/2013</option>
    </select>


    <input onclick="chartClick()" type="button" id="buttonBarChart" value="League Points Chart" class="btn btn-primary btn-m" />
    <input type="button" id="buttonNegChart" value="Goal Difference Chart" class="btn btn-primary btn-m" />
</div>
<br />

<script>
    $('#buttonBarChart').click(function () {
        document.location = '@Url.Action("ChartBar", "League", new { searchString = "" })';
    });
</script>

<script>
    $('#buttonNegChart').click(function chartClick() {
        var year = document.getElementById("year").innerHTML.slice(64, 73); //cuts a string (start, end)
        if (year == "2013/2014") {
            document.location = '@Url.Action("ColumnWithNegativeValues", "League", new { searchString = "2013/2014" })';
        }
        else if (year == "2012/2013") {
            document.location = '@Url.Action("ColumnWithNegativeValues", "League", new { searchString = "2012/2013" })';
        }
    });
        @*$('#buttonNegChart').click(function () {
        document.location = '@Url.Action("ColumnWithNegativeValues", "League", new { searchString = "2013/2014" })';
    });*@
</script>

<script>
    function changeYear(year) {
        if (year == "2013/2014") {
            document.location = '@Url.Action("Index", "League", new { searchString = "2013/2014" })';
        }
        else if (year == "2012/2013")
        {
           document.location = '@Url.Action("Index", "League", new { searchString = "2012/2013" })';
        }
    }
</script>



<table class="table">
    <tr>
        @*<th>
            @Html.DisplayNameFor(model => model.LeagueID)
        </th>*@
        <th>
            @Html.DisplayNameFor(model => model.LeagueName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Year)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Club)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Played)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Wins)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Draws)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Losses)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.GoalsFor)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.GoalsAgainst)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.GoalDifference)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Points)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            @*<td>
                @Html.DisplayFor(modelItem => item.LeagueID)
            </td>*@
            <td>
                @Html.DisplayFor(modelItem => item.LeagueName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Year)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Club)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Played)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Wins)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Draws)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Losses)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.GoalsFor)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.GoalsAgainst)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.GoalDifference)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Points)
            </td>
            <td>
                @Html.ActionLink("Details", "Details", new { id = item.LeagueID }) |
                @Html.ActionLink("Goals", "Chart", new { id = item.LeagueID }) |
                @Html.ActionLink("Matches", "ChartPie", new { id = item.LeagueID })
            </td>
        </tr>
    }

</table>